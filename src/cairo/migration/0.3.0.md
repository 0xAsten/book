## 0.3.0

### Components

In this version, components are renamed to models. The `#[component]` attribute is now `#[model]`.
Remember to update all files and imports. This needs to be updated in `#[derive(Component)]` as well.

`SerdeLen` is not implemented for models anymore, if needed use now `SchemaIntrospection` instead.

TODO: Check implementation of some schemaintrospection or not.

### Systems

Systems are managed differently now. You first need to write an interface on top of each system specifying what it will implement:

```rust,ignore
#[starknet::interface]
trait ICreateCard<TContractState> {
    fn create_card(
        self: @TContractState,
        world: IWorldDispatcher,
        token_id: u256,
        dribble: u8,
        defense: u8,
        cost: u8,
        role: Roles,
        is_captain: bool
    ) -> ();
}
```

it needs to be typed with `TContractState`.
In earlier versions, the functions inside the system needed to be called execute, it is not the case anymore.

To implement the interface we created earlier, we need to add the following code:

```rust,ignore
 #[external(v0)]
    impl CreateCardImpl of ICreateCard<ContractState> {
        fn create_card(
            self: @ContractState,
            world: IWorldDispatcher,
            token_id: u256,
            dribble: u8,
            defense: u8,
            cost: u8,
            role: Roles,
            is_captain: bool
        ) {
            // your logic here
        }
```

You need to add `#[external(v0)]` on top of each method so you can call them later.

Remember to add the import of your interface on top of your module: `use super::ICreateCard;`

#### Events

Now events should be placed inside the models, here is an example event:

```rust,ignore
#[event]
#[derive(Copy, Drop, starknet::Event)]
enum Event {
    DeckCreated: DeckCreated
}

#[derive(Copy, Drop, starknet::Event)]
struct DeckCreated {
    player: ContractAddress,
    token_list: Span<u256>,
}
```

This code represents a migration of this event previously:

```rust,ignore
#[derive(Drop, starknet::Event, Copy)]
struct DeckCreated {
    player: ContractAddress,
    token_list: Span<u256>,
}
```

### Testing

Tests are now managed differently, you can't call world.execute anymore, but need to use dispatcher instead.
Here is a walkthrough:

-import deploy contract in your test file, and dispatcher and dispatcher trait for each system you will use in the file:

```rust,ignore
use dojo::test_utils::{deploy_contract};
use tsubasa::systems::{ICreateCardDispatcher, ICreateCardDispatcherTrait};
```

Then, deploy the contract and instanciate the dispatcher:

```rust,ignore
let contract_create_card = deploy_contract(
        create_card_system::TEST_CLASS_HASH, array![].span()
    );
let create_card_system = ICreateCardDispatcher { contract_address: contract_create_card };
```

Finally, call the function you want to test:

```rust,ignore
let contract_create_card = deploy_contract(
        create_card_system::TEST_CLASS_HASH, array![].span()
    );
let create_card_system = ICreateCardDispatcher { contract_address: contract_create_card };
```
